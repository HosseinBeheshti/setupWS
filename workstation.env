# ============================================================
# Workstation Environment Configuration
# ============================================================
# 
# USAGE: Run 'sudo ./run_vpn.sh' for interactive VPN connection
#   - Select VPN type (L2TP or OpenVPN)
#   - All apps in VPN_APPS will be routed through selected VPN
#   - No separate app lists per VPN - one unified list
#
# ============================================================

# ============================================================
# --- CLOUDFLARE ZERO TRUST CONFIGURATION ---
# ============================================================
# Required for Cloudflare Tunnel and Access
# Get these from: https://one.dash.cloudflare.com/

# Cloudflare Tunnel Token (from tunnel creation in CF dashboard)
CLOUDFLARE_TUNNEL_TOKEN=""

# Your domain managed by Cloudflare
CLOUDFLARE_DOMAIN="yourdomain.com"

# Cloudflare Zone ID (from domain overview page)
CLOUDFLARE_ZONE_ID=""

# ============================================================
# --- SHADOWSOCKS CONFIGURATION (Iran Bypass) ---
# ============================================================
# Shadowsocks provides DPI-resistant connection for censored regions

# Strong password for Shadowsocks (change this!)
SS_PASSWORD="ChangeThisStrongPassword123!"

# Encryption method (recommended: chacha20-ietf-poly1305)
SS_METHOD="chacha20-ietf-poly1305"

# Internal port (exposed as 443 externally)
SS_PORT="8388"

# ============================================================
# --- WIREGUARD VPN CONFIGURATION (User Access) ---
# ============================================================
# WireGuard VPN for routing user traffic through VPS

# VPS public IP address (auto-detected if left empty)
WG_SERVER_PUBLIC_IP=""

# WireGuard listen port
WG_PORT="51820"

# WireGuard subnet for clients (sequential IP allocation)
WG_SUBNET="10.13.13.0/24"

# DNS servers for WireGuard clients
WG_DNS="1.1.1.1,1.0.0.1"

# ============================================================
# --- DATABASE & BACKUP CONFIGURATION ---
# ============================================================

# SQLite database path for user/device tracking
DB_PATH="/var/lib/ztna/users.db"

# Backup directory
BACKUP_DIR="/var/lib/ztna/backups"

# ============================================================
# --- GENERAL SETTINGS ---
# ============================================================
# Server IP: YOUR_SERVER_PUBLIC_IP
# Server root password <change_this_root_password>
# Github SSH Key generation 
# $ ssh-keygen -t ed25519 -C "<your_email@example.com>"

# --- VNC Users Configuration ---
# Define VNC users separately for better readability
# User 1
VNCUSER1_USERNAME='gateway'
VNCUSER1_PASSWORD='change_this_strong_password'
VNCUSER1_DISPLAY='1'
VNCUSER1_RESOLUTION='1920x1080'
VNCUSER1_PORT='5910'

# User 2
VNCUSER2_USERNAME='vncuser'
VNCUSER2_PASSWORD='change_this_password_too'
VNCUSER2_DISPLAY='2'
VNCUSER2_RESOLUTION='1920x1080'
VNCUSER2_PORT='5911'

# Add more users as needed (VNCUSER3_*, VNCUSER4_*, etc.)
# Total number of VNC users configured
VNC_USER_COUNT=2

# --- Server Configuration ---
SERVER_PUBLIC_IP="YOUR_SERVER_PUBLIC_IP"

# --- VPN Configuration ---
# VPN types to configure (space-separated list: l2tp ovpn wireguard)
VPN_LIST="l2tp ovpn"

# --- L2TP VPN Configuration ---
L2TP_SERVER_IP='YOUR_VPN_SERVER_PUBLIC_IP'
L2TP_IPSEC_PSK='YOUR_IPSEC_PSK'
L2TP_USERNAME='vpn_username'
L2TP_PASSWORD='vpn_password'
L2TP_PPP_GATEWAY='192.168.150.1'
# Remote PC IP to route through L2TP VPN (optional, leave empty if not needed)
L2TP_REMOTE_PC_IP='YOUR_REMOTE_PC_IP'

# --- OpenVPN Configuration ---
OVPN_CONFIG_PATH='/etc/openvpn/client/config.ovpn'
OVPN_USERNAME='ovpn_user'
OVPN_PASSWORD='ovpn_password'

# --- VPN Applications Configuration ---
# Applications to route through selected VPN (space-separated)
# All apps listed here will have their traffic routed through the VPN you select at runtime
VPN_APPS="xrdp remmina firefox"

# --- Virtual Router Configuration ---
# Starting routing table number (will auto-increment for each VPN)
VR_TABLE_START=200

# --- Additional Applications to Install ---
# Space-separated list of applications to install
ADDITIONAL_APPS="vim htop curl wget net-tools docker vscode google-chrome-stable firefox"

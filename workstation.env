# ============================================================
# Cloudflare WARP Connector VPN Replacement Configuration
# ============================================================
#
# This configuration file defines settings for Cloudflare WARP Connector
# deployment - a complete VPN replacement that routes ALL client traffic
# through your VPS with Zero Trust security.
#
# ARCHITECTURE:
#   - Client devices connect with Cloudflare One Agent (WARP client)
#   - ALL traffic (DNS, web, apps, games) routes through WARP Connector on VPS
#   - Gateway filtering applied to all protocols (DNS/Network/HTTP)
#   - Direct SSH/VNC access to VPS management (standard ports)
#   - L2TP/IPSec fallback VPN for devices without WARP support
#
# MAIN SCRIPTS:
#   sudo ./setup_server.sh    - ONE-TIME VPS setup (installs & configures everything)
#
# SETUP WORKFLOW:
#   1. Complete Cloudflare Zero Trust dashboard setup (Part 1 in README.md):
#      - Create WARP Connector tunnel
#      - Copy tunnel token to CLOUDFLARE_WARP_TOKEN below
#      - Configure device enrollment
#      - Configure split tunnels
#   
#   2. Edit this file (workstation.env):
#      - Add your CLOUDFLARE_WARP_TOKEN
#      - Configure VNC users (usernames, passwords, ports)
#      - Set VPS IP address
#   
#   3. Run setup script:
#      sudo ./setup_server.sh
#      (Installs all apps, registers WARP Connector, starts VNC servers)
#   
#   4. Client setup:
#      - Install Cloudflare One Agent
#      - Authenticate with your email
#      - All traffic now routes through VPS
#
# USER ACCESS:
#   - Authentication: Gmail + One-time PIN (configured in Cloudflare dashboard)
#   - Traffic routing: ALL protocols through WARP Connector
#   - Exit IP: Your VPS IP address
#   - SSH/VNC: Direct access to VPS management (ports 22, 5910, 5911)
#   - Fallback: L2TP/IPSec for devices without WARP support
#
# CONFIGURATION REQUIRED BELOW:
#   1. CLOUDFLARE_WARP_TOKEN (from tunnel creation in dashboard)
#   2. VPS IP address
#   3. VNC user passwords (VNCUSER*_PASSWORD)
#   4. Optional: L2TP/IPSec credentials for fallback VPN
#
# ============================================================

# ============================================================
# --- CLOUDFLARE WARP CONNECTOR CONFIGURATION ---
# ============================================================
# WARP Connector token from Cloudflare dashboard
# Get this from: Networks → Connectors → Cloudflare Tunnels → Create tunnel → WARP Connector
# After creating the tunnel, copy the token from the installation command

CLOUDFLARE_WARP_TOKEN=""

# VPS public IP address (will be auto-detected if left empty)
VPS_PUBLIC_IP=""

# ============================================================
# --- VNC USERS CONFIGURATION ---
# ============================================================
# Configure VNC server users for remote desktop access
# Each user gets their own VNC server instance on a dedicated port

# User 1
VNCUSER1_USERNAME='gateway'
VNCUSER1_PASSWORD='change_this_strong_password'
VNCUSER1_DISPLAY='1'
VNCUSER1_RESOLUTION='1920x1080'
VNCUSER1_PORT='5910'

# User 2
VNCUSER2_USERNAME='vncuser'
VNCUSER2_PASSWORD='change_this_password_too'
VNCUSER2_DISPLAY='2'
VNCUSER2_RESOLUTION='1920x1080'
VNCUSER2_PORT='5911'

# Add more users as needed (VNCUSER3_*, VNCUSER4_*, etc.)
# Total number of VNC users configured
VNC_USER_COUNT=2

# ============================================================
# --- L2TP/IPSEC VPN CONFIGURATION (Fallback) ---
# ============================================================
# L2TP/IPSec VPN for devices that don't support WARP Connector
# Optional fallback option for legacy devices

# L2TP server configuration
L2TP_IPSEC_PSK='your_ipsec_preshared_key_here'
L2TP_USERNAME='vpnuser'
L2TP_PASSWORD='vpn_password_here'
